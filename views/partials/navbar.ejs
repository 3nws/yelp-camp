<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <span
      class="iconify icon:mdi-tent icon-inline:false"
      id="yelpcamp-icon"
    ></span>
    <h3 class="float-md-left mb-0 ml-4 brand">YelpCamp</h3>

    <a
      role="button"
      class="navbar-burger"
      aria-label="menu"
      aria-expanded="false"
      data-target="navBrrr"
    >
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navBrrr" class="navbar-menu">
    <div class="navbar-start">
      <a class="navbar-item" href="/"> Home </a>
      <a class="navbar-item" href="/campgrounds"> Campgrounds </a>
      <a class="navbar-item" href="/about"> About </a>
      <a class="navbar-item" href="/campgrounds/full-map"> Map </a>
      <a href="/users" class="navbar-item"> Users </a>
    </div>

    <div class="navbar-end">
      <div class="navbar-item">
        <div class="d-md-block">
          <form action="/campgrounds" method="GET" class="input-group">
            <input
              type="text"
              class="form-control"
              type="text"
              name="search"
              placeholder="Search Campgrounds..."
              aria-label="Search"
            />
            <div class="input-group-append">
              <button class="btn" type="submit">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </form>
        </div>
      </div>
      <div class="navbar-item">
        <div class="buttons">
          <% if(loggedUser) { %>
          <a href="/profile/<%= loggedUser._id %> " class="button is-info"
            >Profile</a
          >
          <a href="/logout" class="button is-light">
            Logout
            <i class="fa fa-sign-out ml-1" aria-hidden="true"></i
          ></a>
          <% } else { %>
          <a class="button is-primary" href="/register">
            <strong
              >Sign up
              <i class="fa fa-user-plus" aria-hidden="true"></i>
            </strong>
          </a>
          <a class="button is-light" href="/login">
            Log in
            <i class="fa fa-sign-in ml-1" aria-hidden="true"></i
          ></a>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Get all "navbar-burger" elements
    const $navbarBurgers = Array.prototype.slice.call(
      document.querySelectorAll(".navbar-burger"),
      0
    );

    // Check if there are any navbar burgers
    if ($navbarBurgers.length > 0) {
      // Add a click event on each of them
      $navbarBurgers.forEach((el) => {
        el.addEventListener("click", () => {
          // Get the target from the "data-target" attribute
          const target = el.dataset.target;
          const $target = document.getElementById(target);

          // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
          el.classList.toggle("is-active");
          $target.classList.toggle("is-active");
        });
      });
    }
  });
</script>
